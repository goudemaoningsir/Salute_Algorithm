åœ¨ç®—æ³•ä¸­ï¼Œé‡å¤æ‰§è¡ŒæŸä¸ªä»»åŠ¡æ˜¯å¾ˆå¸¸è§çš„ï¼Œå®ƒä¸å¤æ‚åº¦åˆ†ææ¯æ¯ç›¸å…³ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å…ˆæ¥äº†è§£å¦‚ä½•åœ¨ç¨‹åºä¸­å®ç°é‡å¤æ‰§è¡Œä»»åŠ¡ï¼Œå³ä¸¤ç§åŸºæœ¬çš„ç¨‹åºæ§åˆ¶ç»“æ„ï¼šè¿­ä»£ã€é€’å½’ã€‚

## 1ã€è¿­ä»£

è¿­ä»£ï¼ˆiterationï¼‰æ˜¯ä¸€ç§é‡å¤æ‰§è¡ŒæŸä¸ªä»»åŠ¡çš„æ§åˆ¶ç»“æ„ã€‚åœ¨è¿­ä»£ä¸­ï¼Œç¨‹åºä¼šåœ¨æ»¡è¶³ä¸€å®šçš„æ¡ä»¶ä¸‹é‡å¤æ‰§è¡ŒæŸæ®µä»£ç ï¼Œç›´åˆ°è¿™ä¸ªæ¡ä»¶ä¸å†æ»¡è¶³ã€‚

### ï¼ˆ1ï¼‰for å¾ªç¯

`for` å¾ªç¯æ˜¯æœ€å¸¸è§çš„è¿­ä»£å½¢å¼ä¹‹ä¸€ï¼Œ**é€‚åˆåœ¨é¢„å…ˆçŸ¥é“è¿­ä»£æ¬¡æ•°æ—¶ä½¿ç”¨**ã€‚

ä»¥ä¸‹å‡½æ•°åŸºäº `for` å¾ªç¯å®ç°äº†æ±‚å’Œ 1+2+â‹¯+ğ‘› ï¼Œæ±‚å’Œç»“æœä½¿ç”¨å˜é‡ `res` è®°å½•ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒPython ä¸­ `range(a, b)` å¯¹åº”çš„åŒºé—´æ˜¯â€œå·¦é—­å³å¼€â€çš„ï¼Œå¯¹åº”çš„éå†èŒƒå›´ä¸º ğ‘,ğ‘+1,â€¦,ğ‘âˆ’1 ï¼š

```python
def for_loop(n: int) -> int:
    """for å¾ªç¯"""
    res = 0
    # å¾ªç¯æ±‚å’Œ 1, 2, ..., n-1, n
    for i in range(1, n + 1):
        res += i
    return res
```

![](https://www.hello-algo.com/chapter_computational_complexity/iteration_and_recursion.assets/iteration.png)

æ­¤æ±‚å’Œå‡½æ•°çš„æ“ä½œæ•°é‡ä¸è¾“å…¥æ•°æ®å¤§å° ğ‘› æˆæ­£æ¯”ï¼Œæˆ–è€…è¯´æˆâ€œçº¿æ€§å…³ç³»â€ã€‚å®é™…ä¸Šï¼Œ**æ—¶é—´å¤æ‚åº¦æè¿°çš„å°±æ˜¯è¿™ä¸ªâ€œçº¿æ€§å…³ç³»â€**ã€‚

### ï¼ˆ2ï¼‰while å¾ªç¯

ä¸ `for` å¾ªç¯ç±»ä¼¼ï¼Œ`while` å¾ªç¯ä¹Ÿæ˜¯ä¸€ç§å®ç°è¿­ä»£çš„æ–¹æ³•ã€‚åœ¨ `while` å¾ªç¯ä¸­ï¼Œç¨‹åºæ¯è½®éƒ½ä¼šå…ˆæ£€æŸ¥æ¡ä»¶ï¼Œå¦‚æœæ¡ä»¶ä¸ºçœŸï¼Œåˆ™ç»§ç»­æ‰§è¡Œï¼Œå¦åˆ™å°±ç»“æŸå¾ªç¯ã€‚

ä¸‹é¢æˆ‘ä»¬ç”¨ `while` å¾ªç¯æ¥å®ç°æ±‚å’Œ 1+2+â‹¯+ğ‘› ï¼š

```python
def while_loop(n: int) -> int:
    """while å¾ªç¯"""
    res = 0
    i = 1  # åˆå§‹åŒ–æ¡ä»¶å˜é‡
    # å¾ªç¯æ±‚å’Œ 1, 2, ..., n-1, n
    while i <= n:
        res += i
        i += 1  # æ›´æ–°æ¡ä»¶å˜é‡
    return res
```

**`while` å¾ªç¯æ¯” `for` å¾ªç¯çš„è‡ªç”±åº¦æ›´é«˜**ã€‚åœ¨ `while` å¾ªç¯ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥è‡ªç”±åœ°è®¾è®¡æ¡ä»¶å˜é‡çš„åˆå§‹åŒ–å’Œæ›´æ–°æ­¥éª¤ã€‚

ä¾‹å¦‚åœ¨ä»¥ä¸‹ä»£ç ä¸­ï¼Œæ¡ä»¶å˜é‡ ğ‘– æ¯è½®è¿›è¡Œä¸¤æ¬¡æ›´æ–°ï¼Œè¿™ç§æƒ…å†µå°±ä¸å¤ªæ–¹ä¾¿ç”¨ `for` å¾ªç¯å®ç°ï¼š

```python
def while_loop_ii(n: int) -> int:
    """while å¾ªç¯ï¼ˆä¸¤æ¬¡æ›´æ–°ï¼‰"""
    res = 0
    i = 1  # åˆå§‹åŒ–æ¡ä»¶å˜é‡
    # å¾ªç¯æ±‚å’Œ 1, 4, 10, ...
    while i <= n:
        res += i
        # æ›´æ–°æ¡ä»¶å˜é‡
        i += 1
        i *= 2
    return res
```

æ€»çš„æ¥è¯´ï¼Œ**`for` å¾ªç¯çš„ä»£ç æ›´åŠ ç´§å‡‘ï¼Œ`while` å¾ªç¯æ›´åŠ çµæ´»**ï¼Œä¸¤è€…éƒ½å¯ä»¥å®ç°è¿­ä»£ç»“æ„ã€‚é€‰æ‹©ä½¿ç”¨å“ªä¸€ä¸ªåº”è¯¥æ ¹æ®ç‰¹å®šé—®é¢˜çš„éœ€æ±‚æ¥å†³å®šã€‚

### ï¼ˆ3ï¼‰åµŒå¥—å¾ªç¯

æˆ‘ä»¬å¯ä»¥åœ¨ä¸€ä¸ªå¾ªç¯ç»“æ„å†…åµŒå¥—å¦ä¸€ä¸ªå¾ªç¯ç»“æ„ï¼Œä¸‹é¢ä»¥ `for` å¾ªç¯ä¸ºä¾‹ï¼š

```python
def nested_for_loop(n: int) -> str:
    """åŒå±‚ for å¾ªç¯"""
    res = ""
    # å¾ªç¯ i = 1, 2, ..., n-1, n
    for i in range(1, n + 1):
        # å¾ªç¯ j = 1, 2, ..., n-1, n
        for j in range(1, n + 1):
            res += f"({i}, {j}), "
    return res
```

![](https://www.hello-algo.com/chapter_computational_complexity/iteration_and_recursion.assets/nested_iteration.png)

åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå‡½æ•°çš„æ“ä½œæ•°é‡ä¸ ğ‘›Â² æˆæ­£æ¯”ï¼Œæˆ–è€…è¯´ç®—æ³•è¿è¡Œæ—¶é—´å’Œè¾“å…¥æ•°æ®å¤§å° ğ‘› æˆâ€œå¹³æ–¹å…³ç³»â€ã€‚

æˆ‘ä»¬å¯ä»¥ç»§ç»­æ·»åŠ åµŒå¥—å¾ªç¯ï¼Œæ¯ä¸€æ¬¡åµŒå¥—éƒ½æ˜¯ä¸€æ¬¡â€œå‡ç»´â€ï¼Œå°†ä¼šä½¿æ—¶é—´å¤æ‚åº¦æé«˜è‡³â€œç«‹æ–¹å…³ç³»â€â€œå››æ¬¡æ–¹å…³ç³»â€ï¼Œä»¥æ­¤ç±»æ¨ã€‚

## 2ã€é€’å½’

é€’å½’ï¼ˆrecursionï¼‰æ˜¯ä¸€ç§ç®—æ³•ç­–ç•¥ï¼Œé€šè¿‡å‡½æ•°è°ƒç”¨è‡ªèº«æ¥è§£å†³é—®é¢˜ã€‚å®ƒä¸»è¦åŒ…å«ä¸¤ä¸ªé˜¶æ®µã€‚

1. **é€’**ï¼šç¨‹åºä¸æ–­æ·±å…¥åœ°è°ƒç”¨è‡ªèº«ï¼Œé€šå¸¸ä¼ å…¥æ›´å°æˆ–æ›´ç®€åŒ–çš„å‚æ•°ï¼Œç›´åˆ°è¾¾åˆ°â€œç»ˆæ­¢æ¡ä»¶â€ã€‚
2. **å½’**ï¼šè§¦å‘â€œç»ˆæ­¢æ¡ä»¶â€åï¼Œç¨‹åºä»æœ€æ·±å±‚çš„é€’å½’å‡½æ•°å¼€å§‹é€å±‚è¿”å›ï¼Œæ±‡èšæ¯ä¸€å±‚çš„ç»“æœã€‚

è€Œä»å®ç°çš„è§’åº¦çœ‹ï¼Œé€’å½’ä»£ç ä¸»è¦åŒ…å«ä¸‰ä¸ªè¦ç´ ã€‚

1. **ç»ˆæ­¢æ¡ä»¶**ï¼šç”¨äºå†³å®šä»€ä¹ˆæ—¶å€™ç”±â€œé€’â€è½¬â€œå½’â€ã€‚
2. **é€’å½’è°ƒç”¨**ï¼šå¯¹åº”â€œé€’â€ï¼Œå‡½æ•°è°ƒç”¨è‡ªèº«ï¼Œé€šå¸¸è¾“å…¥æ›´å°æˆ–æ›´ç®€åŒ–çš„å‚æ•°ã€‚
3. **è¿”å›ç»“æœ**ï¼šå¯¹åº”â€œå½’â€ï¼Œå°†å½“å‰é€’å½’å±‚çº§çš„ç»“æœè¿”å›è‡³ä¸Šä¸€å±‚ã€‚

è§‚å¯Ÿä»¥ä¸‹ä»£ç ï¼Œæˆ‘ä»¬åªéœ€è°ƒç”¨å‡½æ•° `recur(n)` ï¼Œå°±å¯ä»¥å®Œæˆ 1+2+â‹¯+ğ‘› çš„è®¡ç®—ï¼š

```python
def recur(n: int) -> int:
    """é€’å½’"""
    # ç»ˆæ­¢æ¡ä»¶
    if n == 1:
        return 1
    # é€’ï¼šé€’å½’è°ƒç”¨
    res = recur(n - 1)
    # å½’ï¼šè¿”å›ç»“æœ
    return n + res
```

![](https://www.hello-algo.com/chapter_computational_complexity/iteration_and_recursion.assets/recursion_sum.png)

è™½ç„¶ä»è®¡ç®—è§’åº¦çœ‹ï¼Œè¿­ä»£ä¸é€’å½’å¯ä»¥å¾—åˆ°ç›¸åŒçš„ç»“æœï¼Œ**ä½†å®ƒä»¬ä»£è¡¨äº†ä¸¤ç§å®Œå…¨ä¸åŒçš„æ€è€ƒå’Œè§£å†³é—®é¢˜çš„èŒƒå¼**ã€‚

- **è¿­ä»£**ï¼šâ€œè‡ªä¸‹è€Œä¸Šâ€åœ°è§£å†³é—®é¢˜ã€‚ä»æœ€åŸºç¡€çš„æ­¥éª¤å¼€å§‹ï¼Œç„¶åä¸æ–­é‡å¤æˆ–ç´¯åŠ è¿™äº›æ­¥éª¤ï¼Œç›´åˆ°ä»»åŠ¡å®Œæˆã€‚
- **é€’å½’**ï¼šâ€œè‡ªä¸Šè€Œä¸‹â€åœ°è§£å†³é—®é¢˜ã€‚å°†åŸé—®é¢˜åˆ†è§£ä¸ºæ›´å°çš„å­é—®é¢˜ï¼Œè¿™äº›å­é—®é¢˜å’ŒåŸé—®é¢˜å…·æœ‰ç›¸åŒçš„å½¢å¼ã€‚æ¥ä¸‹æ¥å°†å­é—®é¢˜ç»§ç»­åˆ†è§£ä¸ºæ›´å°çš„å­é—®é¢˜ï¼Œç›´åˆ°åŸºæœ¬æƒ…å†µæ—¶åœæ­¢ï¼ˆåŸºæœ¬æƒ…å†µçš„è§£æ˜¯å·²çŸ¥çš„ï¼‰ã€‚

ä»¥ä¸Šè¿°æ±‚å’Œå‡½æ•°ä¸ºä¾‹ï¼Œè®¾é—®é¢˜ ğ‘“(ğ‘›)=1+2+â‹¯+ğ‘› ã€‚

- **è¿­ä»£**ï¼šåœ¨å¾ªç¯ä¸­æ¨¡æ‹Ÿæ±‚å’Œè¿‡ç¨‹ï¼Œä» 1 éå†åˆ° ğ‘› ï¼Œæ¯è½®æ‰§è¡Œæ±‚å’Œæ“ä½œï¼Œå³å¯æ±‚å¾— ğ‘“(ğ‘›) ã€‚
- **é€’å½’**ï¼šå°†é—®é¢˜åˆ†è§£ä¸ºå­é—®é¢˜ ğ‘“(ğ‘›)=ğ‘›+ğ‘“(ğ‘›âˆ’1) ï¼Œä¸æ–­ï¼ˆé€’å½’åœ°ï¼‰åˆ†è§£ä¸‹å»ï¼Œç›´è‡³åŸºæœ¬æƒ…å†µ ğ‘“(1)=1 æ—¶ç»ˆæ­¢ã€‚

### ï¼ˆ1ï¼‰è°ƒç”¨æ ˆ

é€’å½’å‡½æ•°æ¯æ¬¡è°ƒç”¨è‡ªèº«æ—¶ï¼Œç³»ç»Ÿéƒ½ä¼šä¸ºæ–°å¼€å¯çš„å‡½æ•°åˆ†é…å†…å­˜ï¼Œä»¥å­˜å‚¨å±€éƒ¨å˜é‡ã€è°ƒç”¨åœ°å€å’Œå…¶ä»–ä¿¡æ¯ç­‰ã€‚è¿™å°†å¯¼è‡´ä¸¤æ–¹é¢çš„ç»“æœã€‚

- å‡½æ•°çš„ä¸Šä¸‹æ–‡æ•°æ®éƒ½å­˜å‚¨åœ¨ç§°ä¸ºâ€œæ ˆå¸§ç©ºé—´â€çš„å†…å­˜åŒºåŸŸä¸­ï¼Œç›´è‡³å‡½æ•°è¿”å›åæ‰ä¼šè¢«é‡Šæ”¾ã€‚å› æ­¤ï¼Œ**é€’å½’é€šå¸¸æ¯”è¿­ä»£æ›´åŠ è€—è´¹å†…å­˜ç©ºé—´**ã€‚
- é€’å½’è°ƒç”¨å‡½æ•°ä¼šäº§ç”Ÿé¢å¤–çš„å¼€é”€ã€‚**å› æ­¤é€’å½’é€šå¸¸æ¯”å¾ªç¯çš„æ—¶é—´æ•ˆç‡æ›´ä½**ã€‚

å¦‚å›¾ 2-4 æ‰€ç¤ºï¼Œåœ¨è§¦å‘ç»ˆæ­¢æ¡ä»¶å‰ï¼ŒåŒæ—¶å­˜åœ¨ ğ‘› ä¸ªæœªè¿”å›çš„é€’å½’å‡½æ•°ï¼Œ**é€’å½’æ·±åº¦ä¸º ğ‘›** ã€‚

![](https://www.hello-algo.com/chapter_computational_complexity/iteration_and_recursion.assets/recursion_sum_depth.png)

åœ¨å®é™…ä¸­ï¼Œç¼–ç¨‹è¯­è¨€å…è®¸çš„é€’å½’æ·±åº¦é€šå¸¸æ˜¯æœ‰é™çš„ï¼Œè¿‡æ·±çš„é€’å½’å¯èƒ½å¯¼è‡´æ ˆæº¢å‡ºé”™è¯¯ã€‚

### ï¼ˆ2ï¼‰å°¾é€’å½’

æœ‰è¶£çš„æ˜¯ï¼Œ**å¦‚æœå‡½æ•°åœ¨è¿”å›å‰çš„æœ€åä¸€æ­¥æ‰è¿›è¡Œé€’å½’è°ƒç”¨**ï¼Œåˆ™è¯¥å‡½æ•°å¯ä»¥è¢«ç¼–è¯‘å™¨æˆ–è§£é‡Šå™¨ä¼˜åŒ–ï¼Œä½¿å…¶åœ¨ç©ºé—´æ•ˆç‡ä¸Šä¸è¿­ä»£ç›¸å½“ã€‚è¿™ç§æƒ…å†µè¢«ç§°ä¸ºå°¾é€’å½’ï¼ˆtail recursionï¼‰ã€‚

- **æ™®é€šé€’å½’**ï¼šå½“å‡½æ•°è¿”å›åˆ°ä¸Šä¸€å±‚çº§çš„å‡½æ•°åï¼Œéœ€è¦ç»§ç»­æ‰§è¡Œä»£ç ï¼Œå› æ­¤ç³»ç»Ÿéœ€è¦ä¿å­˜ä¸Šä¸€å±‚è°ƒç”¨çš„ä¸Šä¸‹æ–‡ã€‚
- **å°¾é€’å½’**ï¼šé€’å½’è°ƒç”¨æ˜¯å‡½æ•°è¿”å›å‰çš„æœ€åä¸€ä¸ªæ“ä½œï¼Œè¿™æ„å‘³ç€å‡½æ•°è¿”å›åˆ°ä¸Šä¸€å±‚çº§åï¼Œæ— é¡»ç»§ç»­æ‰§è¡Œå…¶ä»–æ“ä½œï¼Œå› æ­¤ç³»ç»Ÿæ— é¡»ä¿å­˜ä¸Šä¸€å±‚å‡½æ•°çš„ä¸Šä¸‹æ–‡ã€‚

ä»¥è®¡ç®— 1+2+â‹¯+ğ‘› ä¸ºä¾‹ï¼Œæˆ‘ä»¬å¯ä»¥å°†ç»“æœå˜é‡ `res` è®¾ä¸ºå‡½æ•°å‚æ•°ï¼Œä»è€Œå®ç°å°¾é€’å½’ï¼š

```python
def tail_recur(n, res):
    """å°¾é€’å½’"""
    # ç»ˆæ­¢æ¡ä»¶
    if n == 0:
        return res
    # å°¾é€’å½’è°ƒç”¨
    return tail_recur(n - 1, res + n)
```

å°¾é€’å½’çš„æ‰§è¡Œè¿‡ç¨‹å¦‚å›¾ 2-5 æ‰€ç¤ºã€‚å¯¹æ¯”æ™®é€šé€’å½’å’Œå°¾é€’å½’ï¼Œä¸¤è€…çš„æ±‚å’Œæ“ä½œçš„æ‰§è¡Œç‚¹æ˜¯ä¸åŒçš„ã€‚

- **æ™®é€šé€’å½’**ï¼šæ±‚å’Œæ“ä½œæ˜¯åœ¨â€œå½’â€çš„è¿‡ç¨‹ä¸­æ‰§è¡Œçš„ï¼Œæ¯å±‚è¿”å›åéƒ½è¦å†æ‰§è¡Œä¸€æ¬¡æ±‚å’Œæ“ä½œã€‚
- **å°¾é€’å½’**ï¼šæ±‚å’Œæ“ä½œæ˜¯åœ¨â€œé€’â€çš„è¿‡ç¨‹ä¸­æ‰§è¡Œçš„ï¼Œâ€œå½’â€çš„è¿‡ç¨‹åªéœ€å±‚å±‚è¿”å›ã€‚

![](https://www.hello-algo.com/chapter_computational_complexity/iteration_and_recursion.assets/tail_recursion_sum.png)

!>è¯·æ³¨æ„ï¼Œè®¸å¤šç¼–è¯‘å™¨æˆ–è§£é‡Šå™¨å¹¶ä¸æ”¯æŒå°¾é€’å½’ä¼˜åŒ–ã€‚ä¾‹å¦‚ï¼ŒPython é»˜è®¤ä¸æ”¯æŒå°¾é€’å½’ä¼˜åŒ–ï¼Œå› æ­¤å³ä½¿å‡½æ•°æ˜¯å°¾é€’å½’å½¢å¼ï¼Œä»ç„¶å¯èƒ½ä¼šé‡åˆ°æ ˆæº¢å‡ºé—®é¢˜ã€‚

### ï¼ˆ3ï¼‰é€’å½’æ ‘

å½“å¤„ç†ä¸â€œåˆ†æ²»â€ç›¸å…³çš„ç®—æ³•é—®é¢˜æ—¶ï¼Œé€’å½’å¾€å¾€æ¯”è¿­ä»£çš„æ€è·¯æ›´åŠ ç›´è§‚ã€ä»£ç æ›´åŠ æ˜“è¯»ã€‚ä»¥â€œæ–æ³¢é‚£å¥‘æ•°åˆ—â€ä¸ºä¾‹ã€‚

Question

ç»™å®šä¸€ä¸ªæ–æ³¢é‚£å¥‘æ•°åˆ— 0,1,1,2,3,5,8,13,â€¦ ï¼Œæ±‚è¯¥æ•°åˆ—çš„ç¬¬ ğ‘› ä¸ªæ•°å­—ã€‚

è®¾æ–æ³¢é‚£å¥‘æ•°åˆ—çš„ç¬¬ ğ‘› ä¸ªæ•°å­—ä¸º ğ‘“(ğ‘›) ï¼Œæ˜“å¾—ä¸¤ä¸ªç»“è®ºã€‚

- æ•°åˆ—çš„å‰ä¸¤ä¸ªæ•°å­—ä¸º ğ‘“(1)=0 å’Œ ğ‘“(2)=1 ã€‚
- æ•°åˆ—ä¸­çš„æ¯ä¸ªæ•°å­—æ˜¯å‰ä¸¤ä¸ªæ•°å­—çš„å’Œï¼Œå³ ğ‘“(ğ‘›)=ğ‘“(ğ‘›âˆ’1)+ğ‘“(ğ‘›âˆ’2) ã€‚

æŒ‰ç…§é€’æ¨å…³ç³»è¿›è¡Œé€’å½’è°ƒç”¨ï¼Œå°†å‰ä¸¤ä¸ªæ•°å­—ä½œä¸ºç»ˆæ­¢æ¡ä»¶ï¼Œä¾¿å¯å†™å‡ºé€’å½’ä»£ç ã€‚è°ƒç”¨ `fib(n)` å³å¯å¾—åˆ°æ–æ³¢é‚£å¥‘æ•°åˆ—çš„ç¬¬ ğ‘› ä¸ªæ•°å­—ï¼š

```python
def fib(n: int) -> int:
    """æ–æ³¢é‚£å¥‘æ•°åˆ—ï¼šé€’å½’"""
    # ç»ˆæ­¢æ¡ä»¶ f(1) = 0, f(2) = 1
    if n == 1 or n == 2:
        return n - 1
    # é€’å½’è°ƒç”¨ f(n) = f(n-1) + f(n-2)
    res = fib(n - 1) + fib(n - 2)
    # è¿”å›ç»“æœ f(n)
    return res
```

è§‚å¯Ÿä»¥ä¸Šä»£ç ï¼Œæˆ‘ä»¬åœ¨å‡½æ•°å†…é€’å½’è°ƒç”¨äº†ä¸¤ä¸ªå‡½æ•°ï¼Œ**è¿™æ„å‘³ç€ä»ä¸€ä¸ªè°ƒç”¨äº§ç”Ÿäº†ä¸¤ä¸ªè°ƒç”¨åˆ†æ”¯**ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œè¿™æ ·ä¸æ–­é€’å½’è°ƒç”¨ä¸‹å»ï¼Œæœ€ç»ˆå°†äº§ç”Ÿä¸€æ£µå±‚æ•°ä¸º ğ‘› çš„é€’å½’æ ‘ï¼ˆrecursion treeï¼‰ã€‚

![](https://www.hello-algo.com/chapter_computational_complexity/iteration_and_recursion.assets/recursion_tree.png)

ä»æœ¬è´¨ä¸Šçœ‹ï¼Œé€’å½’ä½“ç°äº†â€œå°†é—®é¢˜åˆ†è§£ä¸ºæ›´å°å­é—®é¢˜â€çš„æ€ç»´èŒƒå¼ï¼Œè¿™ç§åˆ†æ²»ç­–ç•¥è‡³å…³é‡è¦ã€‚

- ä»ç®—æ³•è§’åº¦çœ‹ï¼Œæœç´¢ã€æ’åºã€å›æº¯ã€åˆ†æ²»ã€åŠ¨æ€è§„åˆ’ç­‰è®¸å¤šé‡è¦ç®—æ³•ç­–ç•¥ç›´æ¥æˆ–é—´æ¥åœ°åº”ç”¨äº†è¿™ç§æ€ç»´æ–¹å¼ã€‚
- ä»æ•°æ®ç»“æ„è§’åº¦çœ‹ï¼Œé€’å½’å¤©ç„¶é€‚åˆå¤„ç†é“¾è¡¨ã€æ ‘å’Œå›¾çš„ç›¸å…³é—®é¢˜ï¼Œå› ä¸ºå®ƒä»¬éå¸¸é€‚åˆç”¨åˆ†æ²»æ€æƒ³è¿›è¡Œåˆ†æã€‚

## 3ã€ä¸¤è€…å¯¹æ¯”

æ€»ç»“ä»¥ä¸Šå†…å®¹ï¼Œå¦‚ä¸‹è¡¨æ‰€ç¤ºï¼Œè¿­ä»£å’Œé€’å½’åœ¨å®ç°ã€æ€§èƒ½å’Œé€‚ç”¨æ€§ä¸Šæœ‰æ‰€ä¸åŒã€‚

|          | è¿­ä»£                                   | é€’å½’                                                         |
| :------- | :------------------------------------- | :----------------------------------------------------------- |
| å®ç°æ–¹å¼ | å¾ªç¯ç»“æ„                               | å‡½æ•°è°ƒç”¨è‡ªèº«                                                 |
| æ—¶é—´æ•ˆç‡ | æ•ˆç‡é€šå¸¸è¾ƒé«˜ï¼Œæ— å‡½æ•°è°ƒç”¨å¼€é”€           | æ¯æ¬¡å‡½æ•°è°ƒç”¨éƒ½ä¼šäº§ç”Ÿå¼€é”€                                     |
| å†…å­˜ä½¿ç”¨ | é€šå¸¸ä½¿ç”¨å›ºå®šå¤§å°çš„å†…å­˜ç©ºé—´             | ç´¯ç§¯å‡½æ•°è°ƒç”¨å¯èƒ½ä½¿ç”¨å¤§é‡çš„æ ˆå¸§ç©ºé—´                           |
| é€‚ç”¨é—®é¢˜ | é€‚ç”¨äºç®€å•å¾ªç¯ä»»åŠ¡ï¼Œä»£ç ç›´è§‚ã€å¯è¯»æ€§å¥½ | é€‚ç”¨äºå­é—®é¢˜åˆ†è§£ï¼Œå¦‚æ ‘ã€å›¾ã€åˆ†æ²»ã€å›æº¯ç­‰ï¼Œä»£ç ç»“æ„ç®€æ´ã€æ¸…æ™° |

é‚£ä¹ˆï¼Œè¿­ä»£å’Œé€’å½’å…·æœ‰ä»€ä¹ˆå†…åœ¨è”ç³»å‘¢ï¼Ÿä»¥ä¸Šè¿°é€’å½’å‡½æ•°ä¸ºä¾‹ï¼Œæ±‚å’Œæ“ä½œåœ¨é€’å½’çš„â€œå½’â€é˜¶æ®µè¿›è¡Œã€‚è¿™æ„å‘³ç€æœ€åˆè¢«è°ƒç”¨çš„å‡½æ•°å®é™…ä¸Šæ˜¯æœ€åå®Œæˆå…¶æ±‚å’Œæ“ä½œçš„ï¼Œ**è¿™ç§å·¥ä½œæœºåˆ¶ä¸æ ˆçš„â€œå…ˆå…¥åå‡ºâ€åŸåˆ™å¼‚æ›²åŒå·¥**ã€‚

äº‹å®ä¸Šï¼Œâ€œè°ƒç”¨æ ˆâ€å’Œâ€œæ ˆå¸§ç©ºé—´â€è¿™ç±»é€’å½’æœ¯è¯­å·²ç»æš—ç¤ºäº†é€’å½’ä¸æ ˆä¹‹é—´çš„å¯†åˆ‡å…³ç³»ã€‚

1. **é€’**ï¼šå½“å‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œç³»ç»Ÿä¼šåœ¨â€œè°ƒç”¨æ ˆâ€ä¸Šä¸ºè¯¥å‡½æ•°åˆ†é…æ–°çš„æ ˆå¸§ï¼Œç”¨äºå­˜å‚¨å‡½æ•°çš„å±€éƒ¨å˜é‡ã€å‚æ•°ã€è¿”å›åœ°å€ç­‰æ•°æ®ã€‚
2. **å½’**ï¼šå½“å‡½æ•°å®Œæˆæ‰§è¡Œå¹¶è¿”å›æ—¶ï¼Œå¯¹åº”çš„æ ˆå¸§ä¼šè¢«ä»â€œè°ƒç”¨æ ˆâ€ä¸Šç§»é™¤ï¼Œæ¢å¤ä¹‹å‰å‡½æ•°çš„æ‰§è¡Œç¯å¢ƒã€‚

å› æ­¤ï¼Œ**æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€ä¸ªæ˜¾å¼çš„æ ˆæ¥æ¨¡æ‹Ÿè°ƒç”¨æ ˆçš„è¡Œä¸º**ï¼Œä»è€Œå°†é€’å½’è½¬åŒ–ä¸ºè¿­ä»£å½¢å¼ï¼š

```python
def for_loop_recur(n: int) -> int:
    """ä½¿ç”¨è¿­ä»£æ¨¡æ‹Ÿé€’å½’"""
    # ä½¿ç”¨ä¸€ä¸ªæ˜¾å¼çš„æ ˆæ¥æ¨¡æ‹Ÿç³»ç»Ÿè°ƒç”¨æ ˆ
    stack = []
    res = 0
    # é€’ï¼šé€’å½’è°ƒç”¨
    for i in range(n, 0, -1):
        # é€šè¿‡â€œå…¥æ ˆæ“ä½œâ€æ¨¡æ‹Ÿâ€œé€’â€
        stack.append(i)
    # å½’ï¼šè¿”å›ç»“æœ
    while stack:
        # é€šè¿‡â€œå‡ºæ ˆæ“ä½œâ€æ¨¡æ‹Ÿâ€œå½’â€
        res += stack.pop()
    # res = 1+2+3+...+n
    return res
```